<nz-layout class="owl-layout">
  <nz-header style="width:100%">
    <div class="logo"></div>
  </nz-header>
  <nz-content class="owl-content">
    <div nz-row>
      <div class="qrcode-wrapper" nz-col nzSpan="6">
        <qrcode [qrdata]="connectQrCodeId" [size]="160" [level]="'M'"></qrcode>
        <div>{{connectQrCodeId}}</div>
      </div>
      <div class="log-wrapper" nz-col nzSpan="18">
        <nz-tabset class="log-panel">
          <nz-tab nzTitle="全部消息">
            <nz-collapse [nzBordered]="false" [nzAccordion]="true">
              <nz-collapse-panel *ngFor="let item of allMessage" [nzHeader]="item.simpleMessage"
                [nzExtra]="item.type === 'console'? consoleTagTpl : requestTagTpl">
                <!-- console 显示模板 -->
                <ng-container *ngIf="item.type === 'console'">
                  {{item.message}}
                </ng-container>

                <!-- 请求显示模板 -->
                <ng-container *ngIf="item.type === 'request'">
                  <div nz-row>
                    <div nz-col nzSpan="12">
                      <div>请求内容</div>
                      <div>{{item.message.request | json}}</div>
                    </div>
                    <div nz-col nzSpan="12">
                      返回内容
                      <div>{{item.message.res | json}}</div>
                    </div>
                  </div>
                </ng-container>
              </nz-collapse-panel>
            </nz-collapse>
          </nz-tab>
          <nz-tab nzTitle="Console 消息">
            <nz-collapse [nzBordered]="false" [nzAccordion]="true">
              <nz-collapse-panel *ngFor="let item of consoleMessageOnly" [nzHeader]="item.simpleMessage"
                [nzExtra]="consoleTagTpl">
                  {{item.message}}
              </nz-collapse-panel>
            </nz-collapse>
          </nz-tab>
          <nz-tab nzTitle="Request 消息">
            <nz-collapse [nzBordered]="false" [nzAccordion]="true">
              <nz-collapse-panel *ngFor="let item of requestMessageOnly" [nzHeader]="item.simpleMessage"
                [nzExtra]="requestTagTpl">
                  <div nz-row>
                    <div nz-col nzSpan="12">
                      <div>请求内容</div>
                      <div>{{item.message.request | json}}</div>
                    </div>
                    <div nz-col nzSpan="12">
                      返回内容
                      <div>{{item.message.res | json}}</div>
                    </div>
                  </div>
              </nz-collapse-panel>
            </nz-collapse>
          </nz-tab>
        </nz-tabset>
        <div>

        </div>
      </div>
    </div>
  </nz-content>
  <nz-footer style="text-align: center;">Ant Design ©2019 Implement By Angular</nz-footer>
</nz-layout>


<ng-template #consoleTagTpl>
  <nz-tag [nzColor]="'#87d068'">Log</nz-tag>
</ng-template>

<ng-template #requestTagTpl>
  <nz-tag [nzColor]="'#108ee9'">Request</nz-tag>
</ng-template>